<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>profile.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Profile 0.4.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>profile</span></div></div></li><li class="depth-2 current"><a href="profile.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="profile.core.html#var-*profile-data*"><div class="inner"><span>*profile-data*</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-clear-profile-data"><div class="inner"><span>clear-profile-data</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-max-sample-count"><div class="inner"><span>max-sample-count</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-print-summary"><div class="inner"><span>print-summary</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-profile"><div class="inner"><span>profile</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-profile-ns"><div class="inner"><span>profile-ns</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-profile-session"><div class="inner"><span>profile-session</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-profile-var"><div class="inner"><span>profile-var</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-profile-var*"><div class="inner"><span>profile-var*</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-profile-vars"><div class="inner"><span>profile-vars</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-profiled.3F"><div class="inner"><span>profiled?</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-set-max-sample-count"><div class="inner"><span>set-max-sample-count</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-summary"><div class="inner"><span>summary</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-toggle-profile-ns"><div class="inner"><span>toggle-profile-ns</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-toggle-profile-var"><div class="inner"><span>toggle-profile-var</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-toggle-profile-var*"><div class="inner"><span>toggle-profile-var*</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-unprofile-ns"><div class="inner"><span>unprofile-ns</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-unprofile-var"><div class="inner"><span>unprofile-var</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-unprofile-var*"><div class="inner"><span>unprofile-var*</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-unprofile-vars"><div class="inner"><span>unprofile-vars</span></div></a></li><li class="depth-1"><a href="profile.core.html#var-with-session"><div class="inner"><span>with-session</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">profile.core</h2><div class="doc"><pre class="plaintext">A Clojure library for profiling.

## Example

```clojure
(require &apos;[profile.core :refer :all])
(defn my-add [a b] (+ a b))
(defn my-mult [a b] (* a b))

(profile-vars my-add my-mult)

(profile {}
 (my-add (my-mult (rand-int 100000) (rand-int 1000000))
         (my-mult (rand-int 100000) (rand-int 1000000))))
```

`profile` prints output to `*err*` using `pprint/print-table`; it
looks like this:

```
|          :name | :n | :sum | :q1 | :med | :q3 | :sd | :mad |
|----------------+----+------+-----+------+-----+-----+------|
|  #&apos;user/my-add |  1 |  2µs | 2µs |  2µs | 2µs | 0µs |  0µs |
| #&apos;user/my-mult |  2 | 11µs | 3µs |  8µs | 3µs | 3µs |  5µs |
```</pre></div><div class="public anchor" id="var-*profile-data*"><h3>*profile-data*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L39">view source</a></div></div><div class="public anchor" id="var-clear-profile-data"><h3>clear-profile-data</h3><div class="usage"><code>(clear-profile-data)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L48">view source</a></div></div><div class="public anchor" id="var-max-sample-count"><h3>max-sample-count</h3><div class="usage"><code>(max-sample-count)</code></div><div class="doc"><pre class="plaintext">Return maximum sample count of current profile session.
</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L51">view source</a></div></div><div class="public anchor" id="var-print-summary"><h3>print-summary</h3><div class="usage"><code>(print-summary)</code><code>(print-summary session)</code></div><div class="doc"><pre class="plaintext">Prints to *err* statistics for profiled names.
</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L284">view source</a></div></div><div class="public anchor" id="var-profile"><h3>profile</h3><h4 class="type">macro</h4><div class="usage"><code>(profile OPTIONS &amp; BODY)</code></div><div class="doc"><pre class="plaintext">Execute BODY in a new profile session using `OPTIONS` and print
summary of collected profile data to `*err*` using `print-summary`.</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L295">view source</a></div></div><div class="public anchor" id="var-profile-ns"><h3>profile-ns</h3><div class="usage"><code>(profile-ns ns)</code><code>(profile-ns ns include-private?)</code></div><div class="doc"><pre class="plaintext">Equivalent to evaluating `profile-var*` on each function-containing
var is `ns`. If `include-private?` is present and true, profile
functions associated with private vars in addition to public vars,
otherwise profile only public functions. Returns true value.</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L157">view source</a></div></div><div class="public anchor" id="var-profile-session"><h3>profile-session</h3><div class="usage"><code>(profile-session max-sample-count)</code><code>(profile-session)</code></div><div class="doc"><pre class="plaintext">Inititalize profile session with optional maximum sample
count. Default maximum sample count is 10,000.</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L32">view source</a></div></div><div class="public anchor" id="var-profile-var"><h3>profile-var</h3><h4 class="type">macro</h4><div class="usage"><code>(profile-var VAR)</code></div><div class="doc"><pre class="plaintext">If `VAR` is not already profiled, wraps the associated value with a
function that accrues time to the current profile session.</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L106">view source</a></div></div><div class="public anchor" id="var-profile-var*"><h3>profile-var*</h3><div class="usage"><code>(profile-var* var)</code></div><div class="doc"><pre class="plaintext">Given a var value, profile it if it is not already profiled.
</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L99">view source</a></div></div><div class="public anchor" id="var-profile-vars"><h3>profile-vars</h3><h4 class="type">macro</h4><div class="usage"><code>(profile-vars &amp; VARS)</code></div><div class="doc"><pre class="plaintext">Equivalent to evaluating `profile-var` on each element of `VARS`.
</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L112">view source</a></div></div><div class="public anchor" id="var-profiled.3F"><h3>profiled?</h3><div class="usage"><code>(profiled? f)</code></div><div class="doc"><pre class="plaintext">Reurns a true value if `f` is currently profiled.
</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L94">view source</a></div></div><div class="public anchor" id="var-set-max-sample-count"><h3>set-max-sample-count</h3><div class="usage"><code>(set-max-sample-count n)</code></div><div class="doc"><pre class="plaintext">Set maximum sample count of current profile session. Maximum sample
count refers to the the maximum number of samples any individual
name may be associated with. Value is applied when time is accured;
this call will not truncate any profile data.</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L56">view source</a></div></div><div class="public anchor" id="var-summary"><h3>summary</h3><div class="usage"><code>(summary)</code><code>(summary session)</code></div><div class="doc"><pre class="plaintext">Returns a map containing two keys, `:stats` and `:agg-stats`. The
former containts a sequence of maps containing statistics describing
the profile data for each profiled name. `:agg-stats` contains a map
of statistics relevant to the aggregate of all profiles names.</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L235">view source</a></div></div><div class="public anchor" id="var-toggle-profile-ns"><h3>toggle-profile-ns</h3><div class="usage"><code>(toggle-profile-ns ns)</code><code>(toggle-profile-ns ns include-private?)</code></div><div class="doc"><pre class="plaintext">If any vars in `ns` are profiled, unprofile all vars in `ns`,
regardless whether public or private. If no vars in `ns` are
profiled, profiles each public (and private, if `include-private?`
is present and true) function-containing var. Returns true value if
namespace is profiled.</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L185">view source</a></div></div><div class="public anchor" id="var-toggle-profile-var"><h3>toggle-profile-var</h3><h4 class="type">macro</h4><div class="usage"><code>(toggle-profile-var VAR)</code></div><div class="doc"><pre class="plaintext">Profiles or unprofiles `VAR` depending on its current
state. Returns a true value if `VAR` is profiled subsequent to
evaluation of this macro.</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L148">view source</a></div></div><div class="public anchor" id="var-toggle-profile-var*"><h3>toggle-profile-var*</h3><div class="usage"><code>(toggle-profile-var* v)</code></div><div class="doc"><pre class="plaintext">For use by cider-nrepl.
</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L139">view source</a></div></div><div class="public anchor" id="var-unprofile-ns"><h3>unprofile-ns</h3><div class="usage"><code>(unprofile-ns ns)</code></div><div class="doc"><pre class="plaintext">Equivalent to evaluating `unprofile-var*` on each
function-containing var in `ns`, whether public or private. Returns
not-true value.</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L170">view source</a></div></div><div class="public anchor" id="var-unprofile-var"><h3>unprofile-var</h3><h4 class="type">macro</h4><div class="usage"><code>(unprofile-var VAR)</code></div><div class="doc"><pre class="plaintext">If `VAR` is profiled, replaces binding with original function.
</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L128">view source</a></div></div><div class="public anchor" id="var-unprofile-var*"><h3>unprofile-var*</h3><div class="usage"><code>(unprofile-var* var)</code></div><div class="doc"><pre class="plaintext">Given a var value, unprofile it if it is profiled.
</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L122">view source</a></div></div><div class="public anchor" id="var-unprofile-vars"><h3>unprofile-vars</h3><h4 class="type">macro</h4><div class="usage"><code>(unprofile-vars &amp; VARS)</code></div><div class="doc"><pre class="plaintext">Equivalent to evaluating `unprofile-var` on each element of
`VARS`.</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L133">view source</a></div></div><div class="public anchor" id="var-with-session"><h3>with-session</h3><h4 class="type">macro</h4><div class="usage"><code>(with-session OPTIONS &amp; BODY)</code></div><div class="doc"><pre class="plaintext">Evaluate `BODY` in context of a new profile sassion initializaed
with `OPTIONS`, a map that may contain a `:max-sample-count`.</pre></div><div class="src-link"><a href="http://github.com/thunknyc/profile/blob/master/src/profile/core.clj#L41">view source</a></div></div></div></body></html>